\chapter{Problemstellung}

Die Navigation anhand eines 3D Modell bringt gewisse theoretische Probleme mit sich.

\section{Erwartete Probleme} \label{erwartete_probleme:section}

In der Vorbereitung der Arbeit wurden bereits Probleme erkannt, die auf jeden Fall gelöst oder Alternativen dazu gefunden werden müssen, um die erfolgreiche Umsetzung des Projekts zu ermöglichen. Im Folgendem werden diese Probleme erläutert.

\begin{description}
    \item[Sensordrift] Die inertialen Sensoren der Drohne funktionieren über Integrationsfunktionen. Die Messfehler in den inertialen Sensoren können im Laufe der Zeit akkumulieren und die Genauigkeit der Positions- und Bewegungsinformationen der Drohne beeinträchtigen. Dieses Phänomen nennt man Sensordrift.
    \item[Rechenleistung] Um die \ac{SLAM} Algorithmen zu verwenden wird ohne eine effiziente Implementierung sehr viel Rechenleistung benötigt.
    \item[Kalibrierung] Um die Drohne stabil in der Luft zu halten ist eine stabile Kontrolle der Rotoren notwendig. Dazu muss der \ac{PID} Regler auf der Drohne gut kalibriert sein.
\end{description}

\subsection{Lokalisierung der Drohne} \label{lokalisierung_der_drohne:subsection}

Von vorneherein war klar, dass die Lokalisierung der Drohne nicht über \ac{GPS} getätigt werden kann. Für die Aufgaben, welche die Drohne übernehmen soll, ist eine bestmögliche Positionserkennung vonnöten. Die Genauigkeit mittels \ac{GPS} unter den technischen Bedingungen der Drohne beträgt nur zwei Meter. Das weitaus größer Problem mit \ac{GPS} ist allerdings, dass man innerhalb von Gebäude keine Verbindung zu den Satelliten herstellen kann. Aufgrund dieser Probleme ist eine Verwendung von \ac{GPS} zur Lokalisierung der Drohne nicht möglich. Dazu mussten alternative Wege gefunden werden, um eine genaue Lokalisierung ohne \ac{GPS} in Gebäuden zu ermöglichen. Es werden andere, wie in Auflistung \ref{lst:navigation-types} beschriebene Verfahren benötigt.

\begin{description} \label{lst:navigation-types}
    \item [\textbf{Inertielle Navigation}] Die Trägheitsnavigation beruht auf der Verwendung von Trägheitssensoren wie Beschleunigungsmessern und Gyroskopen zur Erfassung der Bewegungen und der Ausrichtung der Drohne. Durch Integration der gemessenen Beschleunigungs- und Drehratenwerte über die Zeit kann die aktuelle Position und Ausrichtung der Drohne bestimmt werden. Die Trägheitsnavigation ist jedoch anfällig für Fehler, die sich mit der Zeit akkumulieren und zu immer größeren Ungenauigkeiten führen. Um die Genauigkeit zu verbessern, können Trägheitsnavigationssysteme mit anderen Lokalisierungstechnologien kombiniert werden, z. B. mit optischen Sensoren oder Magnetometern.

    \item [\textbf{Optische Navigation}] Optische Sensoren, wie Kameras oder Tiefenkameras, können verwendet werden, um die Position und Bewegung der Drohne zu erkennen. Durch die Analyse von Bildern oder Tiefeninformationen aus der Umgebung kann die Drohne ihre Position relativ zur Umgebung bestimmen. Diese Methode erfordert jedoch eine geeignete Umgebung mit ausreichend markanten Merkmalen oder Strukturen, die von den optischen Sensoren erkannt werden können. Zudem kann die Genauigkeit der optischen Lokalisierung durch Beleuchtungsveränderungen oder visuelle Ähnlichkeiten zwischen verschiedenen Bereichen beeinträchtigt werden.

    \item [\textbf{Ultraschallnavigation}] Ultraschall- oder Infrarotsensoren können eingesetzt werden, um die Abstände zu Wänden, Hindernissen oder anderen festen Strukturen in der Umgebung zu messen. Durch die Kombination der gemessenen Abstandswerte mit den Bewegungsdaten der Drohne können Position und Bewegung verfolgt werden. Diese Methode eignet sich insbesondere für den Einsatz in Innenräumen, da Ultraschall- oder Infrarotsignale durch Wände und andere Hindernisse hindurchgehen können. Allerdings sind diese Sensoren anfällig für Reflexionen und Mehrdeutigkeiten, die zu Fehlern in der Lokalisierung führen können.

    \item [\textbf{Magnetfeldnavigation}] Magnetfeldsensoren können genutzt werden, um das Magnetfeld der Erde zu messen und dadurch die Ausrichtung der Drohne zu bestimmen. Durch den Vergleich der gemessenen Magnetfeldwerte mit bekannten Magnetfeldkarten kann die Drohne ihre Position relativ zur Umgebung bestimmen. Diese Methode ist besonders nützlich in Innenräumen, wo \ac{GPS} nicht verfügbar ist. Allerdings kann die Genauigkeit der magnetfeldbasierten Lokalisierung durch Magnetfeldstörungen in der Umgebung, verursacht durch metallische Objekte oder elektrische Geräte, beeinträchtigt werden.

    \item [\textbf{Funkbasierte Lokalisierung:}] Funkbasierte Lokalisierungstechnologien wie Wi-Fi, Bluetooth oder Ultra-Wideband (UWB) können verwendet werden, um die Position der Drohne zu bestimmen. Durch den Empfang und dieAuswertung von Signalstärkeinformationen mehrerer Funkquellen in der Umgebung kann die Drohne ihre Position triangulieren. Diese Methode erfordert jedoch eine ausreichende Abdeckung mit Funkquellen und eine präzise Signalstärkemessung, um genaue Lokalisierungsergebnisse zu erzielen.
\end{description}

Die verwendete COEX Clover Drohne (siehe Kapitel \ref{drohne:section}) verfügt standardmäßig über die in \ref{lst:coex-sensoren} aufgeführten Sensoren.

\begin{center}
\begin{itemize}
    \item Beschleunigungssensoren 
    \item Gyroskope
    \item Magnetometer
    \item Videokamera
    \item GPS
    \item Abstandssensor
\end{itemize}
\label{lst:coex-sensoren}
\end{center}

\subsection{Erfassung des 3D Modells der Karte} \label{erfassung_des_3d-modells:subsection}

Für die Erfassung des 3D-Modells gibt es im Wesentlichen zwei verschiedene Ansätze: vorgescannte Karten und \ac{SLAM}.

Beim ersten Ansatz erfolgt die Navigation innerhalb einer vordefinierten Karte, die dem System bereits bekannt ist. In diesem Fall wurde das 3D-Modell der Umgebung bereits vor dem Einsatz der Drohne erstellt. Die zuvor gescannte Karte dient als Referenz für die Lokalisierung und Navigation der Drohne. Die Drohne kann verschiedene Lokalisierungstechniken, wie die im vorherigen Abschnitt erwähnten, verwenden, um ihre Position innerhalb der vorab gescannten Karte zu bestimmen und entsprechend zu navigieren. Dieser Ansatz wird in der Regel in Szenarien verwendet, in denen die Umgebung relativ statisch ist und die Karte im Voraus mit speziellen Geräten oder Techniken erstellt werden kann.

Der zweite Ansatz besteht darin, die Karte dynamisch in Echtzeit zu erstellen, während die Drohne ihre Umgebung erkundet. Hier kommt SLAM ins Spiel. SLAM ist eine Technik, die es der Drohne ermöglicht, gleichzeitig die Umgebung zu kartieren und sich selbst in dieser Karte zu lokalisieren. Die Drohne nutzt ihre Sensoren, z.B. Kameras oder Tiefensensoren, um Daten über die Umgebung zu sammeln, während sie sich bewegt. Anschließend verarbeitet sie diese Daten mit SLAM-Algorithmen, um ein 3D-Modell der Umgebung zu erstellen und ihre eigene Position in diesem Modell zu bestimmen. SLAM ermöglicht es der Drohne, in unbekannten oder sich verändernden Umgebungen zu navigieren, in denen zuvor gescannte Karten nicht verfügbar oder nicht aktuell sind.

Beide Ansätze haben ihre Vorteile, aber auch ihre Grenzen. Vorab gescannte Karten stellen eine bekannte und zuverlässige Referenz für die Lokalisierung und Navigation dar, erfordern jedoch eine vorherige Kenntnis der Umgebung. Auf der anderen Seite ermöglicht SLAM den Einsatz der Drohne in unbekannten oder sich verändernden Umgebungen, kann aber rechenintensiver und fehleranfälliger sein. Die Wahl des Ansatzes hängt von den spezifischen Anforderungen der Anwendung und den Merkmalen der Betriebsumgebung ab.



\subsection{Nutzung der Software} \label{nutzung_der_software:subsection}

Um die Clover-Drohne effektiv einsetzen zu können, sind mehrere Softwarekomponenten erforderlich. Dazu gehören:

\begin{description}
    \item[\textbf{PX4-Autopilot}] Die PX4-Software ist ein Open-Source-Flugsteuerungssystem, das die Steuerung und Navigation der Drohnenhardware übernimmt. Sie bietet Funktionen wie Flugsteuerung, Stabilisierung, Missionsplanung und Kommunikation mit den Sensoren und Aktoren der Drohne. Die PX4-Software kann auf der Clover-Drohne installiert und konfiguriert werden, um eine präzise Steuerung und Flugleistung zu gewährleisten.
    
    \item[\textbf{Robot Operating System}] ROS ist ein flexibles Framework für die Entwicklung von Robotersoftware. Es bietet eine Vielzahl von Tools, Bibliotheken und Paketen, die für die Entwicklung des Navigationssystems der Clover-Drohne genutzt werden können. ROS ermöglicht die Integration verschiedener Sensoren, die Verarbeitung von Sensorinformationen, die Implementierung von Lokalisierungs- und Kartierungsalgorithmen sowie die Steuerung der Drohne. Die Clover-Drohne kann über eine ROS-Schnittstelle mit der PX4-Software verbunden werden, um eine nahtlose Kommunikation zwischen den Steuerungs- und Navigationssystemen zu ermöglichen.
    \item[\textbf{\ac{SLAM}}] Zur Erstellung und Aktualisierung des Echtzeit-3D-Modells der Umgebung wird ein \ac{SLAM} Verfahren eingesetzt. \ac{SLAM} ermöglicht es der Drohne, ihre Position innerhalb der Umgebung zu bestimmen und gleichzeitig während des Fluges eine Karte der Umgebung zu erstellen. Es gibt verschiedene SLAM-Algorithmen und -Implementierungen, die je nach den Anforderungen und Ressourcen der Clover-Drohne ausgewählt werden können. Einige beliebte SLAM-Bibliotheken sind GMapping, Cartographer und RTAB-Map.
    
    \item[\textbf{Entwicklungsumgebung}]  Um mit ROS zu entwickeln und die Drohne zu simulieren, ist eine geeignete Entwicklungsumgebung erforderlich. Eine beliebte Wahl ist die Verwendung von "Visual Studio Code" zusammen mit den ROS-Erweiterungen. Diese ermöglichen eine effiziente Entwicklung, Fehlersuche und Überwachung von ROS-Programmen. Darüber hinaus können Simulationswerkzeuge wie Gazebo eingesetzt werden, um die Drohne und ihre Umgebung virtuell zu simulieren und verschiedene Szenarien zu testen, bevor sie auf der eigentlichen Hardware ausgeführt werden.

    Durch den Einsatz dieser Softwarekomponenten und geeigneter Entwicklungswerkzeuge kann das volle Potenzial der Clover-Drohne ausgeschöpft werden. Von der Flugsteuerung und Navigation bis hin zur Kartenerstellung und -aktualisierung ermöglicht die Software eine präzise Steuerung und effiziente Ausführung der Aufgaben der Drohne
     
\end{description}

Die Clover-Drohne ist mit einem Raspberry Pi 4 ausgestattet, der die Ausführung von ROS-Programmen erleichtert. Allerdings sollte die Software ressourceneffizient sein, um den begrenzten Ressourcen des Raspberry Pi gerecht zu werden.

\section{Gewünschtes Ergebnis} \label{gewuenschtes_ergebnis:section} 

Das angestrebte Ergebnis des Projekts ist die Entwicklung eines Navigationssystems für die Clover-Drohne, das es ihr ermöglicht, auf der Grundlage eines 3D-Modells der Umgebung genau zu lokalisieren und zu navigieren. Ziel ist es, die erwarteten Herausforderungen wie Sensordrift, Rechenleistung und Kalibrierung zu lösen bzw. alternative Lösungen zu finden.

Das Navigationssystem soll in der Lage sein, die Position der Drohne in Echtzeit zu bestimmen und sie sicher und präzise durch die Umgebung zu führen. Dazu müssen geeignete Lokalisierungstechnologien und Algorithmen eingesetzt werden, die auf den vorhandenen Sensoren der Drohne basieren. Je nach den spezifischen Anforderungen der Anwendung und den Merkmalen der Einsatzumgebung können verschiedene Methoden eingesetzt werden, darunter Trägheitsnavigation, optische Sensoren, Ultraschall- oder Infrarotsensoren, Magnetfeldsensoren oder funkbasierte Lokalisierung.

Neben der Lokalisierung sollte das Navigationssystem auch in der Lage sein, ein 3D-Modell der Umgebung zu erstellen und zu aktualisieren. Dies ermöglicht der Drohne eine präzise Kollisionsvermeidung und eine effiziente Flugplanung. Die \ac{SLAM}-Technologie wird eingesetzt, um Sensordaten zu verarbeiten und ein genaues 3D-Modell zu erstellen. Zu diesem Zweck kann eine geeignete SLAM-Bibliothek wie RTAB-Map, KinectFusion oder ORB-SLAM eingesetzt werden.

Die Softwarekomponenten, einschließlich des PX4-Autopiloten, ROS (Robot Operating System) und SLAM-Algorithmen, sollten effizient implementiert und auf die Ressourcen des Raspberry Pi 4 zugeschnitten sein. Eine geeignete Entwicklungsumgebung und Simulationswerkzeuge werden eine effiziente Softwareentwicklung, Fehlersuche und Überwachung ermöglichen.

Das gewünschte Ergebnis des Projekts ist ein funktionsfähiges Navigationssystem für die Clover-Drohne, das auf der Grundlage eines 3D-Modells der Umgebung genau lokalisieren und navigieren kann. Die entwickelte Software wird auf der Drohne getestet und bewertet, um ihre Leistung und Genauigkeit zu beurteilen. Das Navigationssystem sollte in der Lage sein, verschiedene Flugmanöver und Aufgaben auszuführen, z. B. durch enge Korridore zu navigieren, Hindernissen auszuweichen oder bestimmte Orte in der Umgebung anzuvisieren.

